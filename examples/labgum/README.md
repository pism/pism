# laboratory validation example

Validation of [PISM's](http://www.pism-docs.org) isothermal SIA numerical model
using a laboratory experiment with a [Xanthan gum](http://en.wikipedia.org/wiki/Xanthan_gum)
suspension in water.  This fluid is even more strongly shear-thinning than ice
but at nearly the same density.

The source of the set-up is the "constant flux" experiment in

  R. Sayag and M. G. Worster, 2012. *Axisymmetric gravity currents of
  power-law fluids over a rigid horizontal surface*, J. Fluid Mech.
  doi:10.1017/jfm.2012.545, 1--9

They push the fluid through the bottom of a flat table in a tube of radius
~ 10 mm, at a mass rate of about 3 g / s.  The glaciological analog is an ice
sheet on a flat be generated by positive surface mass balance in the vicinity
of the dome, but with zero surface mass balance everywhere else.

They estimate n = 5.9 instead of n = 3 for ice using regression of laboratory
data to a similarity solution of the SIA geometry evolution equation.

See `gumparams.cdl` for settings of various parameters which suit this fluid
problem of mass ~ 1 kg, in contrast to ~ 10^18 kg for the Greenland ice sheet.

The flow rate in the pipe is assumed to be constant across the pipe,
so that the `climatic_mass_balance` variable is constant in the pipe.

At this point this example does not include the original laboratory data.

## Basic usage

Here is a run for 746 seconds on an 10 mm grid (520 mm / 52 subintervals) and
using 4 processors:

    $ ./rungum.sh 4 53 &> out.lab53 &

The preprocessing stage of this will both translate `gumparams.cdl` --> `gumparams.nc`
and creates `initgum53.nc`.  The run will be generating `out.lab53` from `stdout`
but also generate diagnostic [NetCDF](http://www.unidata.ucar.edu/software/netcdf/)
files `ts_lab53.nc` and `ex_lab53.nc`.

This run took about 10 minutes on my laptop.  When it is done, show the radial
time series:

    $ ./showradius.py -o r53.png ts_lab53.nc

Show the radial time series compared to data from Sayag (not currently public):

    $ ./showradius.py -o r53.png -d constantflux3.txt ts_lab53.nc

Results are better on finer grids because the input pipe radius is
only 10 mm.  For example, this uses a 2.5 mm grid, but will take an overnight run
at least:

    $ ./rungum.sh 4 209 &> out.lab209 &

Note you can compare multiple runs to the data in one figure:

    $ ./showradius.py -o foo.png -d constantflux3.txt ts_lab*.nc

## Changing configuration constants

Edit `gumparams.cdl` and then rerun `buildgum.py` and then use `rungum.sh`.
