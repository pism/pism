# Install some python-based pieces of PISM
if (Pism_BUILD_PYTHON_BINDINGS)
  install (PROGRAMS
    examples/python/ssa_forward.py
    examples/python/sia_forward.py
    examples/inverse/make_synth_ssa.py
    examples/inverse/vel2tauc.py
    examples/inverse/verify_ssa_inv.py
    DESTINATION ${Pism_BIN_DIR} )

    install(DIRECTORY
      ${CMAKE_SOURCE_DIR}/site-packages/PISM
      DESTINATION ${PISM_INSTALL_PYTHON_MODULE_DIR}
      USE_SOURCE_PERMISSIONS
      COMPONENT RuntimeLibraries
    )

    install(DIRECTORY
      ${CMAKE_SOURCE_DIR}/site-packages/siple
      DESTINATION ${PISM_INSTALL_PYTHON_MODULE_DIR}
      USE_SOURCE_PERMISSIONS
      COMPONENT RuntimeLibraries
    )
endif()

set({PISM_PYTHON_LIBRARY_FILES
site-packages/PISM/__init__.py
site-packages/PISM/invert/ssa.py
site-packages/PISM/invert/ssa_gn.py
site-packages/PISM/invert/ssa_siple.py
site-packages/PISM/invert/ssa_tao.py
site-packages/PISM/invert/sipletools.py
site-packages/PISM/logging.py
site-packages/PISM/model.py
site-packages/PISM/options.py
site-packages/PISM/sia.py
site-packages/PISM/ssa.py
site-packages/PISM/toproczero.py
site-packages/PISM/util.py
)


add_custom_target (install_site_packages_in_the_build_directory ALL
  COMMAND ${CMAKE_COMMAND} -E copy_directory ${CMAKE_SOURCE_DIR}/site-packages/PISM ${CMAKE_BINARY_DIR}/site-packages/PISM
  COMMAND ${CMAKE_COMMAND} -E copy_directory ${CMAKE_SOURCE_DIR}/site-packages/siple ${CMAKE_BINARY_DIR}/site-packages/siple
  VERBATIM
  DEPENDS ${PISM_PYTHON_LIBRARY_FILES}
)
